% all the packages
\usepackage{appendix}
\usepackage{amsmath, amssymb, amsthm, mathtools}  % general math stuff
\usepackage{stmaryrd}   % \mapsfrom
\usepackage{extarrows}  % \xlongequal
\usepackage{fontspec}
\usepackage{hyperref}
\usepackage{chngcntr}   % stop section counter from reseting
\usepackage[centertableaux,boxsize=1.2em]{ytableau} % Young diagrams
\usepackage{color}    % colors
\usepackage{tikz-cd}  % commutative diagrams
\usetikzlibrary{positioning}
\usetikzlibrary{arrows}
\usepackage{enumitem} % more control over enumerates
\usepackage[automark, headsepline]{scrlayer-scrpage} %for headers

% keine leere Seite zu Beginn von \mainmatter
% \makeatletter
% \renewcommand\mainmatter{%
%     \clearpage
%   \@mainmattertrue
%   \pagenumbering{arabic}}
% \makeatother

% settings for scrlayer-scrpage
\pagestyle{scrheadings}
\automark{section}

% colours
\definecolor{light-gray}{gray}{0.9}

% colours for hyperref
\hypersetup{
    colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}

% theorem like environments
\theoremstyle{definition}
\newcounter{everything}[section]
\newtheorem{example}[everything]{Example}
\newtheorem*{claim}{Claim}
\newtheorem{corollary}[everything]{Corollary}
\newtheorem{definition}[everything]{Definition}
\newtheorem{fluff}[everything]{}      % to be replaced with something better
\newtheorem{lemma}[everything]{Lemma}
\newtheorem{notation}[everything]{Notation}
\newtheorem{proposition}[everything]{Proposition}
\newtheorem*{recall}{Recall}
\newtheorem{remark}[everything]{Remark}
\newtheorem{theorem}[everything]{Theorem}
\newtheorem{warning}[everything]{Warning}

% don't reset section counter
\counterwithout{section}{chapter}

% how counters are printed
\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand{\theeverything}{\thesection.\arabic{everything}}
\renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}
\renewcommand{\theequation}{\arabic{equation}}

% useful macros
\NewDocumentCommand{\suchthat}{s}{
  \IfBooleanTF{#1}
    {\,\middle|\,}
    {\,|\,}       
}
\newcommand{\defined}{\coloneqq}
\newcommand{\defines}{\eqqcolon}

% categories
\newcommand{\catname}[1]{\mathbf{#1}}
\newcommand{\cGsets}[1]{\ensuremath{#1\text{-}\catname{Sets}}}
\newcommand{\cRep}[2]{\ensuremath{\catname{Rep}^#1_#2}} %first argument is the field k, the second the group G
\newcommand{\cVect}[1]{\ensuremath{#1\text{-}\catname{Vect}}}
\newcommand{\cvect}[1]{\ensuremath{#1\text{-}\catname{vect}}}
\newcommand{\cAlg}[1]{\ensuremath{#1\text{-}\catname{Alg}}}
\newcommand{\cpol}[1]{\ensuremath{#1\text{-}\catname{pol}}}

% numbers and fields
\newcommand{\Natural}{\mathbb{N}}
\newcommand{\Integer}{\mathbb{Z}}
\newcommand{\Rational}{\mathbb{Q}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Complex}{\mathbb{C}}
\newcommand{\Finite}{\mathbb{F}}

% often used commands
\newcommand{\mc}{\mathcal}
\newcommand{\mf}{\mathfrak}

% spaces
\DeclareMathOperator{\Maps}{Maps}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Pol}{Pol}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Mat}{M}
\DeclareMathOperator{\Diag}{Diag}
\DeclareMathOperator{\D}{D}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\Sl}{\mathfrak{sl}}
\DeclareMathOperator{\Par}{Par}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\Irr}{Irr}
\DeclareMathOperator{\irr}{irr}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\vspan}{span}
\DeclareMathOperator{\gr}{gr}

% functions
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\can}{can}
\DeclareMathOperator{\init}{init}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\sgn}{sgn}
\newcommand{\op}{\mathrm{op}}
\DeclareMathOperator{\kchar}{char}
\DeclareMathOperator{\diag}{diag}

% operators
\newcommand{\dotcup}{\ensuremath{\mathrel{\mathaccent\cdot\cup}}}
\newcommand{\bigdotcup}{\charfusion[\mathop]{\bigcup}{\cdot}}

% stuff taking arguments
\newcommand{\dblbrack}[1]{\left[\!\left[#1\right]\!\right]}
\newcommand{\vect}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\gen}[1]{\left\langle #1 \right\rangle}

% technical stuff for \bigdotcup
\makeatletter
\def\moverlay{\mathpalette\mov@rlay}
\def\mov@rlay#1#2{\leavevmode\vtop{%
   \baselineskip\z@skip \lineskiplimit-\maxdimen
   \ialign{\hfil$\m@th#1##$\hfil\cr#2\crcr}}}
\newcommand{\charfusion}[3][\mathord]{
    #1{\ifx#1\mathop\vphantom{#2}\fi
        \mathpalette\mov@rlay{#2\cr#3}
      }
    \ifx#1\mathop\expandafter\displaylimits\fi}
\makeatother
