\section{Recognizing Direct Sums and Direct Products}


\begin{conventions}
  In the following $R$ denotes a ring.
\end{conventions}


\begin{fluff}
  We give a brief explanation under what conditions an $R$-moudule $M$ can be decomposed into a finite direct sum $M = M_1 \oplus \dotsb \oplus M_n$, and under what conditions $R$ can be decomposed as a product $R \cong R_1 \times \dotsb \times R_n$ of suitable rings $R_1, \dotsc, R_n$.
\end{fluff}





\subsection{Decomposition of Modules}


\begin{definition}
  An element $e \in R$ is \emph{idempotent} if $e^2 = e$.
\end{definition}


\begin{definition}
  Two elements $r_1, r_2 \in R$ are \emph{orthogonal} if $r_1 r_2 = r_2 r_1 = 0$.
\end{definition}


\begin{definition}
  A family of elements $r_1, \dotsc, r_n \in R$ is \emph{complete} if $1_R = r_1 + \dotsb + r_n$.
\end{definition}


\begin{theorem}
  \label{theorem: correspondence idempotents and direct decompositions}
  Let $M$ be an $R$-module.
  Then the map
  \begin{align*}
    \left\{
      \begin{tabular}{c}
        complete families of pairwise \\
        orthogonal idempotents  \\
        $(e_1, \dotsc, e_n)$ in $\End_R(M)$
      \end{tabular}
    \right\}
    &\longto
      \left\{
      \begin{tabular}{c}
        families $(M_1, \dotsc, M_n)$ of  \\
        submodules $M_i \moduleleq M$ with \\
        $M = M_1 \oplus \dotsb \oplus M_n$
      \end{tabular}
      \right\},
    \\
                  (e_1, \dotsc, e_n)
    &\longmapsto  (\im(e_1), \dotsc, \im(e_n))
  \end{align*}
  is a well-defined bijection.
  For every family $(M_1, \dotsc, M_n)$ of submodules $M_i \moduleleq M$ with $M = M_1 \oplus \dotsb \oplus M_n$ the correpsonding family $(e_1, \dotsc, e_n)$ is given by
  \[
      e_i(m_1 + \dotsb + m_n)
    = m_i
  \]
  for all $i = 1, \dotsc, n$, $m_1 \in M_1, \dotsc, m_n \in M_n$.
\end{theorem}


\begin{proof}
  Let $(e_1, \dotsc, e_n)$ be a complete family of pairwise orthogonal idempotent endomorphisms $e_i \colon M \to M$, and for every $i = 1, \dotsc, n$ let $M_i \defined \im(e_i)$.
  For every $m \in M$ we have that
  \[
        m
    =   \id_M(m)
    =   (e_1 + \dotsb + e_n)(m)
    =   e_1(m) + \dotsb + e_n(m)
    \in M + \dotsb + M_n \,,
  \]
  which shows that $M = M_1 + \dotsb + M_n$.
  It follows from the orthogonality of the $e_i$ that $\restrict{e_i}{M_j} = 0$ for all $i \neq j$ and it follows from the idempotence of the $e_i$ that $\restrict{e_i}{M_i} = \id_{M_i}$ for every $i$.
  It follows that for every decomposition $m = m_1 + \dotsb + m_n$ with $m_i \in M_i$ for every $i = 1, \dotsc, n$ we have that
  \[
      e_i(m)
    = e_i(m_1 + \dotsb + m_n)
    = e_i(m_1) + \dotsb + e_i(m_n)
    = m_i \,.
  \]
  This shows that this decomposition $m = m_1 + \dotsb + m_n$ is unique, which shows the directness of the sum $M = M_1 + \dotsb + M_n$.
  This shows alltogether that $M = M_1 \oplus \dotsb \oplus M_n$.
  This shows that the given map is well-defined.
  
  Suppose that $M = M_1 \oplus \dotsb \oplus M_n$ for submodules $M_i \moduleleq M$.
  For every $i = 1, \dotsc, n$ let $e_i \colon M \to M$ be the unique endomorphism with
  \[
      e_i(m_1 + \dotsb + m_n)
    = m_i
  \]
  for all $m_1 \in M_1, \dotsc, m_n \in M_n$.
  We then have that $\id_M = e_1 + \dotsb + e_n$, $e_i^2 = e_i$ for all $i = 1, \dotsc, n$ and $e_i e_j = 0$ for all $i \neq j$.
  This shows that $(e_1, \dotsc, e_n)$ is a complete family of pairwise orthogonal idempotents.
  
  These constructions are inverse to each other:
  
  Let $(e_1, \dotsc, e_n)$ be a complete family of pairwise orthogonal idempotents and let $M = M_1 \oplus \dotsb \oplus M_n$ be the associated decomposition.
  Then for the resulting complete family $(e'_1, \dotsc, e'_n)$ of pairwise orthogonal idempotents we have for all $i \neq j$ that
  \[
      \restrict{e_i}{M_j}
    = 0
    = \restrict{e'_i}{M_j} \,,
  \]
  and for all $i = 1, \dotsc, n$ we have that
  \[
      \restrict{e_i}{M_i}
    = \id_{M_i}
    = \restrict{e'_i}{M_i} \,.
  \]
  It follows that $e_i = e'_i$ for all $i = 1, \dotsc, n$ because $M = M_1 + \dotsb + M_n$.
  
  Let $M = M_1 \oplus \dotsb \oplus M_n$ be a decomposition into submodule $M_i \moduleleq M$ and let $(e_1, \dotsc, e_n)$ be the associated complete family of pairwise orthogonal idempotents.
  For the resulting decomposition $M = M'_1 \oplus \dotsb \oplus M'_n$ we have that $M'_i = \im(e_i)$ for every $i = 1, \dotsc, n$.
  It then follows for every $i = 1, \dotsc, n$ from $\restrict{e_i}{M_j} = 0$ for $j \neq i$ and $\restrict{e_i}{M_i} = \id_{M_i}$ that $\im(e_i) = M_i$ and therefore that $M_i = M'_i$.s
\end{proof}


% TODO: Make this proof better.


\begin{corollary}
  \label{corollary: correspondence idempotents and direct ideal decompositions}
  The map
  \begin{align*}
    \left\{
      \begin{tabular}{c}
        complete families of pairwise \\
        orthogonal idempotents  \\
        $(e_1, \dotsc, e_n)$ in $R$
      \end{tabular}
    \right\}
    &\longto
      \left\{
      \begin{tabular}{c}
        families $(I_1, \dotsc, I_n)$ of  \\
        ideals $I_j \moduleleq M$ with \\
        $R = I_1 \oplus \dotsb \oplus I_n$
      \end{tabular}
      \right\},
    \\
                  (e_1, \dotsc, e_n)
    &\longmapsto  (Re_1, \dotsc, Re_n)
  \end{align*}
  is a well-defined bijection.
  For every family $(I_1, \dotsc, I_n)$ of submodules $I_j \moduleleq R$ with $R = I_1 \oplus \dotsb \oplus I_n$ the correpsonding family $(e_1, \dotsc, e_n)$ is given by the unique $e_j \in I_j$ with $1 = e_1 + \dotsb + e_n$.
\end{corollary}


% TODO: Add a proof.


\begin{remark}
  The analogous result of Corollary~\ref{corollary: correspondence idempotents and direct ideal decompositions} for right ideal also holds, and can be proven in the same way.
  Note that the left ideals $R e_i$ have to be replaced by the right ideals $e_i R$.
\end{remark}


\begin{corollary}
  If $M$ is an $R$-module, then the map
  \begin{align*}
    \{ \text{idempotents $e \in \End_R(M)$} \}
    &\longto
      \left\{
      \begin{tabular}{c}
        pairs $(N,P)$ of submodules \\
        $N, P \moduleleq M$ with $M = N \oplus P$
      \end{tabular}
      \right\},
    \\
                  e
    &\longmapsto  (\im(e), \ker(e))
  \end{align*}
  is a bijection.
\end{corollary}


% TODO: Add a proof.


\begin{corollary}
  If $M$ is an $R$-module then for any submodule $N \moduleleq M$ the following conditions are equivalent:
  \begin{enumerate}
    \item
      The submodule $N$ is a direct summand of $M$.
    \item
      There exists an idempotent $R$-module endomorphism $e \colon M \to M$ with $\im(e) = N$.
    \item
      There exists an idempotent $R$-module endomorphism $e \colon M \to M$ with $\ker(e) = N$.
    \item
      There exists an idempotent $R$-module endomorphism $e \colon M \to M$ with $\im(e) \moduleleq N$ and $e(n) = n$ for every $n \in N$.
  \end{enumerate}
\end{corollary}


% TODO: Add a proof.



\subsection{Decomposition of Rings}


\begin{fluff}
  If $R_1, R_2$ are nonzero rings, then $R_1 \times 0$ and $0 \times R_2$ are not subrings of $R_1 \times R_2$ (because they do not contain $1_{R_1 \times R_2} = (1_{R_1}, 1_{R_2})$) but two-sided ideals.
\end{fluff}


\begin{lemma}
  Let $R_1, \dotsc, R_n$ be rings, and for every $j = 1, \dotsc, n$ let
  \[
              I_j
    \defined  0 \times \dotsb \times 0 \times R_j \times 0 \times \dotsb \times 0
  \]
  with $R_j$ in the $j$-th position.
  Then $I_1, \dotsc, I_n$ are two-sided ideals in $R_1 \times \dotsb \times R_n$ with $R_1 \times \dotsb \times R_n = I_1 \oplus \dotsb \oplus I_n$.
\end{lemma}


% TODO: Add a proof.


\begin{fluff}
  We will now discuss under what conditions a ring $R$ may be decomposed as $R \cong R_1 \times \dotsb \times R_n$ for rings $R_1, \dotsc, R_n$.
  We have already seen that $R_1, \dotsc, R_n$ must appear as two-sided ideals in $R$.
\end{fluff}


\begin{definition}
  An element $z \in R$ is \emph{central} if $rz = zr$ for all $r \in R$.
\end{definition}


\begin{proposition}
  \label{proposition: factor ideals are again rings}
  Let $R$ be a ring and let $I_1, \dotsc, I_n \idealleq R$ be two-sided ideals with $R = I_1 \oplus \dotsb \oplus I_n$.
  \begin{enumerate}
    \item
      For all $i \neq j$ we have that $I_i I_j = 0$, and for all $i = 1, \dotsc, n$ we have that $I_i^2 = I_i$.
    \item
      If $1_R = e_1 + \dotsb + e_n$ is the unique decomposition of $1_R$ with $e_j \in I_j$ for every $j = 1, \dotsc, n$, then $e_1, \dotsc, e_n$ is a complete collection of pairwise orthogonal central idempotents of $R$. 
    \item
      Every $I_j$ is a ring with the addition and multiplication inherited from $R$ and $1_{I_j} = e_j$ for every $i = 1, \dotsc, n$.
    \item
      The map
      \[
            I_1 \times \dotsb \times I_n
        \to R,
        \quad   (x_1, \dotsc, x_n)
        \mapsto x_1 + \dotsb + x_n
      \]
      is an isomorphism of rings.
  \end{enumerate}
\end{proposition}


% TODO: Add a proof.


\begin{definition}
  \label{definition: internal direct product of rings}
  In the situation of Proposition~\ref{proposition: factor ideals are again rings} we call $R$ the \emph{internal direct product} of $I_1, \dotsc, I_n$ and write $R = I_1 \times \dotsb \times I_n$.
\end{definition}


\begin{theorem}
  \label{theorem: correspondence central idempotents and direct decompositions}
  The map
  \begin{align*}
    \left\{
      \begin{tabular}{c}
        complete families of pairwise \\
        orthogonal central idempotents  \\
        $(e_1, \dotsc, e_n)$ in $R$
      \end{tabular}
    \right\}
    &\longto
      \left\{
      \begin{tabular}{c}
        families $(I_1, \dotsc, I_n)$ of  \\
        two-sided ideals $I_j \idealleq R$ \\
        with $R = I_1 \oplus \dotsb \oplus I_n$
      \end{tabular}
      \right\},
    \\
                  (e_1, \dotsc, e_n)
    &\longmapsto  (R e_1 R, \dotsc, R e_n R)
  \end{align*}
  is a well-defined bijection, where we denote for every $x \in R$ by
  \[
      R x R
    = \left\{
        \sum_{k=1}^m r_k x r'_k
      \suchthat*
        m \geq 0,
        r_k, r'_k \in R
      \right\}
  \]
  the two-sided ideal generated by $x$.
  For every family  $(I_1, \dotsc, I_n)$ of two-sided ideals $I_j \idealleq R$ with $R = I_1 \oplus \dotsb \oplus I_n$ the corresponding family $(e_1, \dotsc, e_n)$ is given by the unique $e_j \in I_j$ with $1_R = e_1 + \dotsb + e_n$.
\end{theorem}


% TODO: Add a proof.




