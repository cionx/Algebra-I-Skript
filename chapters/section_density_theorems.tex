\section{Centralizers and Jacobson Density Theorems}





\subsection{Centralizers}
\label{subsection: centralizers}


\begin{conventions}
  In this section, $R$ denotes a ring.
\end{conventions}


\begin{definition}
  The \emph{centralizer} or \emph{commutant} of a subset $S \subseteq R$ is
  \[
      \centralizer_R(S)
    = \{
        r \in R
      \suchthat
        \text{$rs = sr$ for every $s \in S$}
      \} \,.
  \]
  The set $S''$ is the \emph{double centralizer} or \emph{double commutant} or \emph{bicommutant} of $S$.
\end{definition}


\begin{definition}
  The \emph{center} of $R$ is
  \[
              \ringcenter(R)
    \defined  \centralizer_R(R)
    =         \{
                r \in R
              \suchthat
                \text{$rs = sr$ for every $s \in R$}
              \} \,.
  \]
\end{definition}


\begin{lemma}
  For every subset $S \subseteq R$ the centralizer $\centralizer_R(S)$ is a subring of $R$.
  The center $\ringcenter(R)$ in particular is a subring of $R$.
\end{lemma}


\begin{proof}
  We have that $1 \in \centralizer_R(S)$.
  For all $r_1, r_2 \in \centralizer_R(S)$ we have for every $s \in S$ that
  \[
      (r_1 + r_2)s
    = r_1 s + r_2 s
    = s r_1 + s r_2
    = s (r_1 + r_2)
  \]
  and therefore $r_1 + r_2 \in \centralizer_R(S)$, as well as
  \[
      r_1 r_2 s
    = r_1 s r_2
    = s r_1 r_2
  \]
  and therefore $r_1 r_2 \in \centralizer_R(S)$.
  For every $r \in \centralizer_R(S)$ we have for every $s \in S$ that
  \[
      (-r) s
    = - (rs)
    = - (sr)
    = s (-r)
  \]
  and therefore $-r \in \centralizer_R(S)$.
\end{proof}


\begin{notation}
  We will often denote the centralizer of $S \subseteq R$ by $S'$ instead of $\centralizer_R(S)$.
\end{notation}


\begin{lemma}
  \label{lemma: centralizes is Galois connection}
  Let $S, T \subseteq R$ be subsets.
  \begin{enumerate}
    \item
      If $S \subseteq T$ then $S' \supseteq T'$.
    \item
      We have that $S \subseteq T'$ if and only if $S' \supseteq T$.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \begin{enumerate}[start = 2]
    \item
      Both conditions express that every $s \in S$ commutes with every $t \in T$.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{corollary}
  For every subset $S \subseteq R$ both $S$ and $\gen{S}$, the subring generated by $S$, have the same centralizer $S' = \gen{S}'$.
\end{corollary}


\begin{proof}
  For every subset $X \subseteq R$ we have that
  \[
          S' \supseteq X
    \iff  S \subseteq X'
    \iff  \gen{S} \subseteq X'
    \iff  \gen{S}' \supseteq X
  \]
  because $X'$ is a subring of $R$.
  This shows that $S'$ and $\gen{S}'$ have the same subsets and are therefore equal.
\end{proof}


\begin{fluff}
  In the language of Remark~\ref{remark: galois connection} we have shown that the centralizer $(-)'$ defines an antitone Galois connection
  \[
  \begin{tikzcd}[column sep = large]
      \{ \text{subrings $S \subseteq R$} \}
      \arrow[shift left]{r}[above]{(-)'}
    & \{ \text{subrings $S \subseteq R$} \}
      \arrow[shift left]{l}[below]{(-)'}
  \end{tikzcd}
  \]
  As always with antitone Galois connections we get the following consequences:
\end{fluff}


\begin{corollary}
  Let $S \subseteq R$ be a subsets.
  Then $S \subseteq S''$ and $S''' = S'$.
\end{corollary}


\begin{proof}
  That $S \subseteq S''$ follows from $S' \supseteq S'$ by Lemma~\ref{lemma: centralizes is Galois connection}.
  It follows from $S \subseteq S''$ that $S' \supseteq S'''$ because $(-)'$ is order-reversing and it follows from $S'' \supseteq S''$ that $S' \subseteq S'''$ by Lemma~\ref{lemma: centralizes is Galois connection}.
\end{proof}


\begin{fluff}
  Let us give some motivation for some of the upcomming sections and results:
  
  Let $M$ be an abelian group.
  Then $M$ is a left $\End_\Integer(M)$-module via
  \[
      f \cdot m
    = f(m)
  \]
  for all $f \in \End_\Integer(M)$, $m \in M$.
  
  Suppose that $R \subseteq \End_\Integer(M)$ is a subring.
  Then the abelian groups $M$ inherts an $R$-module structure by restriction.
  The centralizer $R'$ then consists of all additive maps $f \colon M \to M$ such that
  \[
    f \circ r = r \circ f
  \]
  for all $r \in R$, which is equivalent to the condition
  \[
    f(r \cdot m) = r \cdot f(m)
  \]
  holding for all $r \in R$, $m \in M$.
  We therefore have that $R' = \End_R(M)$.
  By applying this result to the subring $\End_R(M) \subseteq \End_\Integer(M)$ we also find that
  \[
      R'' 
    = \End_{R'}(M)
    = \End_{\End_R(M)}(M) \,.
  \]
  The inclusion $R \subseteq R''$ tells us that every $r \in R$ acts on $M$ by $\End_R(M)$-endomorphisms.
  
  Suppose more generally that $M$ is an $R$-module for a ring $R$.
  Then the $R$-module structure of $M$ corresponds to a ring homomorphism
  \[
            \Phi
    \colon  R
    \to     \End_\Integer(M) \,,
    \quad   r
    \mapsto (m \mapsto rm) \,. 
  \]
  By the above discussion we have that
  \[
      \im(\Phi)'
    = \End_{\im(\Phi)}(M)
    = \End_R(M) 
  \]
  and we have that $\im(\Phi) \subseteq \End_{\End_R(M)}(M)$.
  By abuse of notation we will therefore also write
  \[
              R'
    \defined  R'(M)
    \defined  \End_R(M)
  \]
  even if $R$ itself is not a subring of $\End_\Integer(M)$.
  We can also replace the inclusion $R \subseteq R''(M)$, by the observation that $\Phi$ restrict to a homomorphism $R \to R''(M)$, which we will refer to as the \emph{canonical homomorphism}.
  
  We will be concerned with the following problems regarding centralizers:
  \begin{itemize}
    \item
      Suppose that $R \subseteq \End_\Integer(M)$ is a subring.
      Then under what conditions do we have that $R = R''$?
      That is, under what conditions does $R$ have the \emph{double centralizer property}?
    \item
      Suppose more generally that $M$ is an $R$-module for a ring $R$.
      Then under what conditions do $R$ and $M$ have the \emph{double centralizer property} in the sense that the canonical homomorphism $R \xrightarrow{\Phi} R''(M)$ is surjective?
    \item
      Suppose that $R, S \subseteq \End_\Integer(M)$ are subrings.
      Then under what conditions do we have that $R = S'$ and $S' = R$?
      That is, under what conditions do $R$ and $S$ \emph{centralize each other}?
    \item
      Suppose more generally that $M$ is both an $R$-module and and $S$-module for rings $R, S$ and let $\Phi \colon R \to \End_\Integer(M)$ and $\Psi \colon S \to \End_\Integer(M)$ be the corresponding ring homomorphisms.
      Suppose further that the actions of $R, S$ on $M$ commute, i.e.\ that
      \[
          r \cdot (s \cdot m)
        = s \cdot (r \cdot m)
      \]
      for all $r \in R$, $s \in S$, $m \in M$.
      Then $\im(\Phi) \subseteq S'$ and $\im(\Psi) \subseteq R'$.
      That under what conditions do $R$ and $S$ \emph{centralize each other} in the sense that $\im(\Phi) = S'$ and $\im(\Psi) = R'$?
  \end{itemize}
\end{fluff}


\begin{example}
  If $R$ is simple then $R$ has the double centralizer property with respect to every submodule $M \idealleq R$ by \hyperref[lemma: rieffels theorem]{Rieffel’s theorem} because the canonical homomorphism $R \to R''(M)$ is an isomorphism for $M \neq 0$, and still surjective for $M = 0$.
  Indeed, the original formulation of \hyperref[lemma: rieffels theorem]{Rieffel’s theorem} in \cite{Rieffel} is that \enquote{$R$ coincides with the bicommutant of $M$}.
\end{example}


\begin{proposition}
  \label{proposition: semisimple rings are balanced}
  If $R$ is semisimple then every $R$-module $M$ has the double centralizer property, i.e.\ for every $R$-module $M$ the canonical homomorphism $R \to R''(M)$ is surjective.
\end{proposition}


\begin{proof}
  We may assume w.l.o.g.\ that $R = \Mat_{n_1}(D_1) \times \dotsb \times \Mat_{n_r}(D_r)$ for some $r \geq 0$, $n_1, \dotsc, n_r \geq 1$ and skew fields $D_1, \dotsc, D_r$ by the \hyperref[theorem: artin wedderburn theorem]{theorem of Artin--Wedderburn}.
  If $M = M_1 \oplus \dotsb \oplus M_r$ is the isotypical decomposition of $M$ with $M_i$ being the $D_i^{n_i}$-isotypical component then it follows that
  \[
          R'
    =     \End_R(M)
    \cong \End_R(M_1) \times \dotsb \times \End_R(M_r)
  \]
  with the factor $\End_R(M_i)$ acting on $M_i$ but annihilating $M_j$ for $j \neq i$.
  We thus have that $M = M_1 \boxplus \dotsb \boxplus M_r$ as an $(\End_R(M_1) \times \dotsb \times \End_R(M_r))$-module.
  It follows that
  \begin{align*}
            R''
    &=      \End_{R'}(M)  \\
    &=      \End_{\End_R(M_1) \times \dotsb \times \End_R(M_r)}(M_1 \boxplus \dotsb \boxplus M_r) \\
    &\cong  \End_{\End_R(M_1)}(M_1) \times \dotsb \times \End_{\End_R(M_r)}(M_r)
  \end{align*}
  by Lemma~\ref{label: endomorphism ring of boxsum}.
  The canonical homomorphism $R \to R''$ maps the factor $\Mat_{n_i}(D_i)$ of $R$ into the factor $\End_{\End_R(M_i)}(M_i)$ of $R''$, so it sufficies to consider the case $r = 1$.
  
  Thus we may assume that $R = \Mat_n(D)$ for some $n \geq 1$ and skew field $D$.
  We may then assume that $M = (D^n)^{\oplus I}$ for some index set $I$.
  Then
  \[
          R'
    =     \End_R(M)
    =     \End_R( (D^n)^{\oplus I} )
    \cong \Mat_I^{\cf}( \End_R( D^n ) )
    \cong \Mat_I^{\cf}( D^\op )
    \cong \Mat_I^{\rf}( D )^\op \,.
  \]
  where the first two isomorphisms follow from Corollary~\ref{corollary: End is isomorphic to product of matrix rings Schur style} and the third isomorphism follows from Remark~\ref{remark: transposing infinite matrix ring opposite ring}.
  
  To understand how the $R'$-module structure on $M$ behaves under these isomorphisms we may think of $M = (D^n)^{\oplus I}$ as the space of row-finite matrices $\Mat^{\rf}(n \times I, D)$.
  The left $R$-module structure of $M$ is then simply given by matrix-matrix multiplication, and the left $R'$-module structure on $M$ corresponds to the right $\Mat_I^{\rf}(D)$-module structure on $M$ given by matrix-matrix multiplication:
  \[
    \begin{tikzcd}[column sep = 0em]
        R
        \arrow[equal]{d}
      &\curvearrowright
      & M
        \arrow[equal]{d}
      & \curvearrowleft
      & (R')^\op
        \arrow[equal]{d}[right]{\rotatebox[origin=c]{90}{$\sim$}}
      \\
        \Mat_n(D)
      & \curvearrowright
      & \Mat^{\rf}(n \times I, D)
      & \curvearrowleft
      & \Mat_I^{\rf}(D)
    \end{tikzcd}
  \]
  We denote by $(D^{\oplus I})^T \defined \Mat^\rf(1 \times I, D)$ the space of (row finite) row vectors of size $I$.
  Then
  \[
          M
    \cong \underbrace{ (D^{\oplus I})^T \oplus \dotsb \oplus (D^{\oplus I})^T }_{\text{$n$ times}}
  \]
  as left $\Mat_I^{\rf}(D)^\op$-modules, resp.\ right $\Mat_I^{\rf}(D)$-modules by decomposing $M$ into rows.
  It follows from Remark~\ref{remark: infinite matrix vector space correspondence for skew fields} that
  \[
          \End_{ \Mat_I^{\rf}(D)^\op }\left( (D^{\oplus I})^T \right) 
    \cong D
  \]
  with $D$ acting on $(D^{\oplus I})^T$ by multiplication from the left.
  It follows that
  \begin{align*}
            R''
    &=      \End_{R'}(M)  \\
    &=      \End_{ \Mat_I^{\rf}(D)^\op }( M )   \\
    &\cong  \End_{ \Mat_I^{\rf}(D)^\op }\left( (D^{\oplus I})^T \oplus \dotsb \oplus (D^{\oplus I})^T \right) \\
    &\cong  \Mat_n\left( \End_{ \Mat_I^{\rf}(D)^\op }\left( (D^{\oplus I})^T \right) \right)  \\
    &\cong  \Mat_n(D) \\
    &=      R
  \end{align*}
  with the action of $R''$ on $M$ corresponding to the action of $R$ on $M$.
  This shows that every $\varphi \in R''$ is of the form $\varphi(m) = rm$ for some $r \in R$, i.e.\ that the canonical homomorphism $R \to R''$ is surjective.
\end{proof}


% TODO (optional): Find an alternative proof.





\subsection{Jacobson Density Theorems}
\label{subsection: Jacobson Density Theorems}


\begin{fluff}
  We will finish this section by giving two classical results due to Jacobson which holds for (semi)simple modules over arbitrary rings.
\end{fluff}


\begin{theorem}[First Jacobson density theorem]
  \label{theorem: first jacobson density theorem}
  If $M$ is a semisimple $R$-module then the image of the canonical homomorphism $\Phi \colon R \to R''(M)$ is \enquote{dense} in $R''(M)$ in the sense that for every $f \in R''(M)$ and all finitely many elements $m_1, \dotsc, m_n \in M$ there exists some $r \in R$ with
  \[
      f(m_i)
    = r \cdot m_i
  \]
  for all $i = 1, \dotsc, n$.
\end{theorem}


\begin{proof}
  We consider first the case $n = 1$:
  
  Let $m = m_1 \in M$, let $f \in R''$ and let $C$ be a direct complement of the cylic submodule $Rm \moduleleq M$.
  Let $\pi \colon M \to M$ be the projection onto $Rm$ along the decomposition $M = Rm \oplus C$.
  Then $\pi$ is $R$-linear, i.e.\ an element of $R'$, and it follows that $f$ and $\pi$ commute.
  It follows that
  \[
        f(m)
    =   f(\pi(m))
    =   \pi(f(m))
    \in Rm
  \]
  which shows that $f(m) = rm$ for some $r \in R$.
  
  Suppose now that $n \geq 2$ and let $f \in R''$.
  We extend $f$ to an additive map
  \[
              \hat{f}
    \defined  f^{\oplus n}
    \colon    M^{\oplus n}
    \to       M^{\oplus n} \,,
  \]
  which is in matrix form (see Appendix~\ref{appendix: homomorphisms between direct sums}) given by the diagonal matrix
  \[
      \hat{f}
    = \begin{bmatrix}
        f &         &   \\  
          & \ddots  &   \\
          &         & f
      \end{bmatrix}.
  \]
  It then follows from $f \in R'' = \End_{\End_R(M)}(M)$ that $\hat{f} \in \End_{\End_R(M^{\oplus n})}(M^{\oplus n})$:
  We can represent every $g \in \End_R(M^{\oplus n})$ as a matrix
  \[
      g
    = \begin{bmatrix}
        g_{11}  & \cdots  & g_{1n}  \\
        \vdots  & \ddots  & \vdots  \\
        g_{n1}  & \cdots  & g_{nn}
      \end{bmatrix}
  \]
  with entries $g_{ij} \in \End_R(M) = R'$.
  Then $f$ commutes with every $g_{ij}$ and it follow $\hat{f}$ and $g$ commute.
  
  The $R$-module $M^{\oplus n}$ is again semisimple to it follows from the previously considered case $n = 1$ that for all $m_1, \dotsc, m_n \in M$ there exists some $r \in R$ with
  \[
      (f(m_1), \dotsc, f(m_n))
    = \hat{f}(m_1, \dotsc, m_n)
    = r \cdot (m_1, \dotsc, m_n)
    = (r \cdot m_1, \dotsc, r \cdot m_n) \,.
  \]
  We find that $f(m_i) = r \cdot m_i$ for every $i = 1, \dotsc, n$.
\end{proof}


\begin{corollary}
  \label{corollary: balanced if finitely generated}
  Let $M$ be a semisimple $R$-module such that $M$ is finitely-generated as an $R'(M)$-module.
  Then the canonical homomorphism $R \to R''(M)$ is surjective.
\end{corollary}


\begin{proof}
  Let $m_1, \dotsc, m_n \in R$ be a finite $R'$-generating set of $M$.
  By the \hyperref[theorem: first jacobson density theorem]{first Jacobson density theorem} there exists some $r \in R$ with $r \cdot m_i = f(m_i)$ for all $i = 1, \dotsc, n$.
  Then the two $R'$-module homomorphisms $r \cdot (-)$ and $f$ coincide on the $R'$-generating set $m_1, \dotsc, m_n$ of $M$, which shows that $f = r \cdot (-)$.
\end{proof}


\begin{remark}
  The \enquote{density} in the \hyperref[theorem: first jacobson density theorem]{first Jacobson density theorem} can also be explained topologically:
  We can endow $M$ with the discrete topology and $R''(M) \subseteq M^M$ with the induced product topology.
  Then the \hyperref[theorem: first jacobson density theorem]{first Jacobson density theorem} states that $R$ (or more precisely $\im(\Phi)$ for the canonical homomorphism $\Phi \colon R \to R''(M)$) is topologically dense in $R''(M)$.
\end{remark}


\begin{theorem}[Second Jacobson density theorem]
  \label{theorem: second jacobson density theorem}
  Let $M$ be a simple $R$-module and let $D \defined R'(M)$.
  Suppose that $u_1, \dotsc, u_n \in M$ are $D$-linearly independent.
  Then the image of the canonical homomorphism $R \to R''(M)$ is dense in $R''(M)$ in the sense that for all $v_1, \dotsc, v_n \in M$ there exists some $r \in R$ with
  \[
    r \cdot u_i = v_i
  \]
  for all $i = 1, \dotsc, n$.
\end{theorem}


\begin{proof}[First proof]
  It follows from \hyperref[proposition: schurs lemma for modules]{Schur’s lemma} that $D$ is a skew field.
  It follows from linear algebra that we can extend $u_1, \dotsc, u_n$ to a basis of $M$, from which it then follows that there exists some $f \in \End_D(M)$ with $f(u_i) = v_i$ for all $i = 1, \dotsc, n$.
  It then follows from the \hyperref[theorem: first jacobson density theorem]{first Jacobson density theorem} that there exists some $r \in R$ with
  \[
      r \cdot u_i
    = f(u_i)
    = v_i
  \]
  for all $i = 1, \dotsc, n$.
\end{proof}


\begin{proof}[Second proof]
  We need to show that $N \defined M^{\oplus n}$ is as an $R$-module cyclicly generated by $x \defined (u_1, \dotsc, u_n)$.
  The $R$-module $N$ is semisimple, so there exists a direct complement $C$ of $Rx$.
  Let $\pi \colon N \to N$ be the projection onto $C$ along the decomposition $N = Rx \oplus C$.
  Then $\pi \in \End_R(N) = \End_R(M^{\oplus n})$ is given by a matrix
  \[
      \pi
    = \begin{bmatrix}
        d_{11}  & \cdots  & d_{1n}  \\
        \vdots  & \ddots  & \vdots  \\
        d_{n1}  & \cdots  & d_{nn}
      \end{bmatrix}
  \]
  with entries $d_{ij} \in \End_R(M) = D$ (see Appendix~\ref{appendix: homomorphisms between direct sums}).
  It follows from $\pi(x) = 0$ that
  \[
      d_{i1} u_1 + \dotsb + d_{in} u_n
    = d_{i1}(u_1) + \dotsb + d_{in}(u_n)
    = 0
  \]
  for all $i = 1, \dotsc, n$.
  By using the $D$-linear independence of $u_1, \dotsc, u_n$ it follows that $d_{ij} = 0$ for all $i, j = 1, \dotsc, n$.
  This shows that $\pi = 0$, which shows that $C = 0$ and therefore that $N = Rx$.
\end{proof}


% TODO (optional): Add a counterexample when this not holds.


\begin{remark}
  It can be shown that over an artinian ring $R$ every simple $R$-module $E$ is finite-dimensional as an $R'(M)$-module and therefore has the double centralizer property by the the \hyperref[theorem: second jacobson density theorem]{second Jacobson density theorem}.
  A proof of this finite-dimensionality can be found in \cite[Lemma~13.17]{Isaacs2009Algebra}.
\end{remark}




