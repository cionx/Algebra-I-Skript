\subsection{Isotypical Components}


\begin{fluff}
  While every semisimple $R$-module $M$ can be decomposed into a direct sum of simple $R$-modules, this decomposition is generally not unique as seen in Example~\ref{example: semisimple modules}, part~\ref*{enumerate: vector spaces are semisimple}.
  We will now show that every semisimple module has a canonical decomposition into isotypical components.
\end{fluff}


\begin{conventions}
  In this subsection $R$ denotes a ring, $M, N$ denote $R$-modules and $E, F$ denote simple $R$-modules.
\end{conventions}


\begin{definition}
  The $E$-isotypical component of $M$ is
  \[
              M_E
    \defined  \sum_{L \moduleleq M, L \cong E} L \,.
  \]
  The module $M$ is $E$-isotypical if $M = M_E$.
\end{definition}


\begin{lemma}
  The $E$-isotypical component $M_E$ is $E$-isotypical.
\end{lemma}


\begin{proof}
  We have that
  \[
      (M_E)_E
    = \sum_{L \moduleleq M_E, L \cong E} L
    = \sum_{L \moduleleq M, L \cong E} L
    = M_E
  \]
  because every submodule $L \moduleleq M$ isomorphic to $E$ is already contained in $M_E$.
\end{proof}


\begin{remark}
  The $E$-isotypical component $M_E$ is semisimple because it is a sum of simple $R$-modules.
  It follows that every $E$-isotypical module is semisimple.
\end{remark}


\begin{lemma}
  \label{lemma: intersection of semisimple sums}
  Let $N, N' \moduleleq M$ be semisimple submodules with $N = \sum_{i \in I} L_i$, $N' = \sum_{j \in J} L'_j$ for simple submodules $L_i \moduleleq N$, $L'_j \moduleleq N'$.
  If $N \cap N' \neq 0$ then $L_i \cong L'_j$ for some $i, j$.
\end{lemma}


\begin{proof}
  The module $N \cap N'$ is again semisimple because it is a submodule of $N, N'$.
  It follows from $N \cap N' \neq 0$ that $N \cap N'$ contains a simple module $L$.
  By applying Corollary~\ref{corollary: no nonzero homomorphisms between disjoint semisimple modules} to the inclusions $L \inclusion N$ and $L \inclusion N'$ it follows that $L \cong L_i$ and $L \cong L'_j$ for some $i, j$.
\end{proof}


\begin{definition}
  The set of isomorphism classes of simple $R$-modules is $\Irr(R)$.
\end{definition}


\begin{remark}
  The isotypical component $M_E$ does only depend on the isomorphism class $[E] \in \Irr(R)$.
\end{remark}


\begin{theorem}[Decomposition into isotypical components]
  \label{theorem: isotypical decomposition}
  If $M$ is semisimple then
  \[
      M
    = \bigoplus_{[E] \in \Irr(R)} M_E \,,
  \]
  and if $M = \sum_{i \in I} L_i$ for simple submodules $L_i \moduleleq M$ then
  \[
      M_E
    = \sum_{i \in I, L_i \cong E} L_i
  \]
  for every $[E] \in \Irr(R)$.
\end{theorem}


\begin{proof}
  We have that
  \[
              M
    =         \sum_{i \in I} L_i
    =         \sum_{[E] \in \Irr(R)} \sum_{i \in I, L_i \cong E} L_i
    \moduleleq \sum_{[E] \in \Irr(R)} M_E \,.
  \]
  with $\sum_{i \in I, L_i \cong E} L_i \moduleleq M_E$ for every $E \in \Irr(R)$.
  It thus sufficies to show that the sum $M  = \sum_{[E] \in \Irr(R)} M_E$ is direct, i.e. that
  \[
          M_E \cap \left( \sum_{[F] \in \Irr(R), [F] \neq [E]} M_F \right)
    \neq  0
  \]
  for every $[E] \in \Irr(R)$.
  This follows from Lemma~\ref{lemma: intersection of semisimple sums}.
\end{proof}


\begin{corollary}
  \label{corollary: isotypical components of isotypicial modules}
  If $M$ is $E$-isotypical and $F \ncong E$ then $M_F = 0$, i.e.\ if $L \moduleleq M$ is simple then $F \cong E$.
\end{corollary}


\begin{proof}
  The module $M$ is semisimple and the isotypical decomposition of $M$ is given by $M = M_E$.
  It follows that $M_F = 0$ for every $[F] \in \Irr(R)$ with $[F] \neq [E]$.
\end{proof}


\begin{lemma}
  If $N \moduleleq M$ is a submodule then $N_E = N \cap M_E$.
\end{lemma}


\begin{proof}
  It follows from $N \moduleleq M$ that $N_E \moduleleq M_E$ and therefore that $N_E \moduleleq N \cap M_E$.
  The module $N \cap M_E$ is a submodule of $M_E$ and therefore semisimple.
  For every simple submodule $L \moduleleq N \cap M_E \moduleleq M_E$ we have that $L \cong E$ by Corollary~\ref{corollary: isotypical components of isotypicial modules} and therefore $L \moduleleq N_E$.
  It follows that $N \cap M_E \moduleleq N_E$.
\end{proof}


\begin{corollary}
  If $M$ is $E$-isotypical then every submodule $N \moduleleq M$ is again $E$-isotypical.
\end{corollary}


\begin{proof}
  We have that $N_E = N \cap M_E = N \cap M = N$.
\end{proof}


\begin{lemma}
  If $M$ is semisimple and $M = \bigoplus_{i \in I} L_i$ a decomposition into simple submodules $L_i \moduleleq M$, then for every simple submodule $E \moduleleq M$ there then exists some $i \in I$ with $E \cong L_i$.
\end{lemma}


\begin{proof}
  This follows from $0 \neq E \moduleleq M_E \moduleleq \bigoplus_{i \in I, L_i \cong E} L_i$.
  Alternatively, apply Corollary~\ref{corollary: no nonzero homomorphisms between disjoint semisimple modules} to the inclusion $E \hookrightarrow M = \sum_{i \in I} L_i$.
\end{proof}


\begin{lemma}
  \label{lemma: functioriality of isotypical components}
  Every homomorphism of $R$-modules $f \colon M \to N$ restrict to a homomorphism $f_E \colon M_E \to N_E$.
\end{lemma}


\begin{proof}
  For every simple submodule $L \moduleleq M$ the restriction $\restrict{f}{L}$ is either zero or injective, so that either $f(L) = 0$ or $f(L) \cong L$.
  It follows that
  \[
              f(M_E)
    \moduleleq f\left(\sum_{L \moduleleq M, L \cong E} L \right)
    =         \sum_{L \moduleleq M, L \cong E} f(L)
    \moduleleq \sum_{L' \moduleleq N, L' \cong E} L'
    =         N_E \,,
  \]
  which proves the claim.
\end{proof}


% TODO: Have seen this before for Reynolds Operator


\begin{remark}
  To see that $\Irr(R)$ is indeed a set (and not a proper class) we show that
  \[
      \Irr(R)
    = \{
        [R/I]
      \suchthat
        \text{$I \idealleq R$ is a maximal left ideal}
      \} \,.
  \]
  It follows from Lemma~\ref{proposition: characterisation semisimple modules} that $R/I$ is simple for every maxmimal left ideal $I \idealleq R$.
  If on the other hand $M$ is a simple $R$-module and $m \in M$ is nonzero then $m$ is a cyclic generator.
  The map
  \[
            \varphi
    \colon  R
    \to     M,
    \quad   r
    \mapsto rm
  \]
  is therefore a surjective homomorphism of $R$-modules.
  It follows that $R/I \cong M$ for the left ideal $I \defined \ker \varphi \idealleq R$, and it follows from Lemma~\ref{proposition: characterisation semisimple modules} that $I$ is maximal.

  
%    We construct a $1$:$1$-correspondence between isomorphism classes of simple $R$-modules and maximal left ideals in $R$.
%   Recall that the annihilator of an $R$-module $M$ is $\Ann(M) = \{r \in R \suchthat rm = 0\}$, which is a left ideal in $R$.
%   
%   If $I \idealleq R$ is a maximal left ideal then the $R$-module $R/I$ is simple with $\Ann(R/I) = I$.
%   
%   If $M$ is a simple $R$-module and $x \in M$ is nonzero then $x$ is a cyclic generator of $M$ by Lemma~\ref{lemma: simple iff every cyclic generator}.
%   It follows that the map $R \to M$, $r \mapsto rm$ is a surjective homomorphism of $R$-modules with kernel $\Ann(M) \defines I$, and thus induces an isomorphism of $R$-modules $R/I \cong M$.
%   
%   We have thus constructed a $1$:$1$-correspondence
%   \begin{align*}
%     \{ \text{maximal ideals $I \idealleq R$} \}
%     &\longleftrightarrow
%     \Irr(R) \,, 
%     \\
%     I
%     &\longmapsto
%     R/I \,,
%     \\
%     \Ann(M)
%     &\longmapsfrom
%     M \,.
%   \end{align*}
\end{remark}

